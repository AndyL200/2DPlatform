[gd_scene load_steps=20 format=3 uid="uid://b64lmhekn55ha"]

[ext_resource type="Script" uid="uid://di8r118rft0fm" path="res://Scripts/Character/main_character_script.gd" id="1_1ybpr"]
[ext_resource type="Script" uid="uid://dksbdsq44g46c" path="res://Scripts/Character/health_component.gd" id="1_ewf5k"]
[ext_resource type="Script" uid="uid://dumismv64ekra" path="res://Scripts/Character/velocity_component.gd" id="1_vcyte"]
[ext_resource type="Script" uid="uid://c6xomjrlw6fqh" path="res://Scripts/Character/hurt_box_component.gd" id="2_13gpn"]
[ext_resource type="Texture2D" uid="uid://vx3ii1yu6t8q" path="res://Assets/Player/Sprites/Player_hollow_knight.png" id="5_sh0t6"]
[ext_resource type="Script" uid="uid://bnx45i0gpj86r" path="res://Scripts/attack_component.gd" id="6_t1mcu"]
[ext_resource type="Script" uid="uid://c4d8072e1r5dn" path="res://Scripts/Character/sound_component_char.gd" id="7_lkte0"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_r7hyf"]
size = Vector2(20, 32)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ewf5k"]
size = Vector2(20, 32)

[sub_resource type="Animation" id="Animation_bkimy"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D2:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}

[sub_resource type="Animation" id="Animation_sh0t6"]
resource_name = "attack"
length = 0.4
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D2:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [17, 18, 19, 20]
}

[sub_resource type="Animation" id="Animation_yaeiw"]
resource_name = "damaged"
length = 0.5
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D2:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [30, 31, 32, 33, 34]
}

[sub_resource type="Animation" id="Animation_4vinx"]
resource_name = "death"
length = 1.7
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D2:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51]
}

[sub_resource type="Animation" id="Animation_imarx"]
resource_name = "fall"
length = 0.1
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D2:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [16]
}

[sub_resource type="Animation" id="Animation_t1mcu"]
resource_name = "idle"
length = 0.5
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D2:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4]
}

[sub_resource type="Animation" id="Animation_nhfih"]
resource_name = "jump"
length = 0.1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D2:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}

[sub_resource type="Animation" id="Animation_lkte0"]
resource_name = "move"
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D2:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
}

[sub_resource type="Animation" id="Animation_bqd2k"]
resource_name = "respawn"
length = 0.7
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D2:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [50, 49, 47, 45, 47, 49, 52]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_yaeiw"]
_data = {
&"RESET": SubResource("Animation_bkimy"),
&"attack": SubResource("Animation_sh0t6"),
&"damaged": SubResource("Animation_yaeiw"),
&"death": SubResource("Animation_4vinx"),
&"fall": SubResource("Animation_imarx"),
&"idle": SubResource("Animation_t1mcu"),
&"jump": SubResource("Animation_nhfih"),
&"move": SubResource("Animation_lkte0"),
&"respawn": SubResource("Animation_bqd2k")
}

[node name="MC" type="CharacterBody2D" node_paths=PackedStringArray("sound_c", "hurtBox", "velocityComponent", "animations", "atk")]
script = ExtResource("1_1ybpr")
sound_c = NodePath("SoundComponent")
moveSpeed = 150.0
stepHeight = 25
jumpHeight = 300.0
deceleration = Vector2(10, 2)
jumpCount = 2
hurtBox = NodePath("HurtBoxComponent")
velocityComponent = NodePath("VelocityComponent")
animations = NodePath("AnimationPlayer")
wall_slide = 10
wallForce = Vector2(200, -220)
atk = NodePath("AttackComponent")
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 6)
shape = SubResource("RectangleShape2D_r7hyf")
metadata/_edit_lock_ = true

[node name="HealthComponent" type="Node2D" parent="."]
script = ExtResource("1_ewf5k")
health = 3
limit = 3
metadata/_edit_lock_ = true

[node name="HurtBoxComponent" type="Area2D" parent="." node_paths=PackedStringArray("healthComponent")]
script = ExtResource("2_13gpn")
healthComponent = NodePath("../HealthComponent")
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtBoxComponent"]
position = Vector2(0, 6)
shape = SubResource("RectangleShape2D_ewf5k")
metadata/_edit_lock_ = true

[node name="VelocityComponent" type="Node2D" parent="."]
script = ExtResource("1_vcyte")
metadata/_edit_lock_ = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_yaeiw")
}

[node name="Sprite2D2" type="Sprite2D" parent="."]
texture = ExtResource("5_sh0t6")
hframes = 8
vframes = 7
frame = 1
metadata/_edit_lock_ = true

[node name="Raycast" type="Node2D" parent="."]
position = Vector2(0, 6)
metadata/_edit_lock_ = true

[node name="left" type="RayCast2D" parent="Raycast"]
target_position = Vector2(-14, 0)
metadata/_edit_lock_ = true

[node name="right" type="RayCast2D" parent="Raycast"]
target_position = Vector2(14, 0)
metadata/_edit_lock_ = true

[node name="AttackComponent" type="Node2D" parent="." node_paths=PackedStringArray("attack_ray")]
script = ExtResource("6_t1mcu")
attack_ray = NodePath("attack_ray")
metadata/_edit_lock_ = true

[node name="attack_ray" type="RayCast2D" parent="AttackComponent"]
position = Vector2(0, 5)
rotation = -1.5708
target_position = Vector2(-0.000104904, 29)

[node name="SoundComponent" type="Node" parent="." node_paths=PackedStringArray("localSound")]
script = ExtResource("7_lkte0")
localSound = NodePath("characterSound")

[node name="characterSound" type="AudioStreamPlayer2D" parent="SoundComponent"]

[connection signal="death" from="HealthComponent" to="." method="_on_health_component_death"]
[connection signal="body_entered" from="HurtBoxComponent" to="HurtBoxComponent" method="_on_body_entered"]
